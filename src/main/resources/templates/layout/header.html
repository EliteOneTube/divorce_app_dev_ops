<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<header class="masthead mb-auto" th:fragment="header">
    <div class="cover-container d-flex h-100 mx-auto flex-column">
            <div class="inner" stlye="width:auto">
                <div  class="Lucida_Handwriting">
                    <a class="Lg" href=".." >
                        <h3 class="logo-brand" id="Logo">Divorce app</h3>
                    </a>
                </div>
                <nav class="nav nav-masthead justify-content-center" id="nav-bar">
                    <a class="nav-link" href="/" th:href="@{/}">Home</a>
                    <a sec:authorize="!isAuthenticated()" class="nav-link" href="/login" th:href="@{/login}">Login</a>
                    <a sec:authorize="isAuthenticated()" class="nav-link fw-bold py-1 px-0" href="/logout" th:href="@{/logout}">Logout</a>
                    <a sec:authorize="!isAuthenticated()" class="nav-link fw-bold py-1 px-0" href="/register" th:href="@{/register}">Register</a>
                    <a sec:authorize="isAuthenticated()" class="nav-link fw-bold py-1 px-0" href="/my_divorces" th:href="@{/my_divorces}">My Divorces</a>
                    <a sec:authorize="hasRole('LAWYER')" class="nav-link fw-bold py-1 px-0" href="/cdp" th:href="@{/cdp}">Create a divorce</a>
                    <a sec:authorize="hasRole('NOTARY')" class="nav-link fw-bold py-1 px-0" href="/account_details" th:href="@{/account_details}">Insert notarial instrument</a>
                    <a sec:authorize="hasRole('ADMIN')" class="nav-link fw-bold py-1 px-0" href="/members" th:href="@{/members}">Members</a>
                </nav>
            </div>
    </div>

    <script>
        let current = location.pathname;
        $('#nav-bar a').each(function(){
            //if current path is / then only make home active
            if(current === '/'){
                $('#nav-bar a[href="/"]').addClass('active');
                return;
            }

            let $this = $(this);
            // if the current path is like this link, make it active
            if($this.attr('href').indexOf(current) !== -1){
                $this.addClass('active');
            }
        })
    </script>
</header>
</body>
</html>